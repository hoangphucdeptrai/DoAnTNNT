{% extends "base.html" %}
{% set page_type = "product_detail" %}
{% set product_id = product.id %}

{% block title %}{{ product.name }} - ShopAI{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
        <li class="breadcrumb-item"><a href="/products">Sản phẩm</a></li>
        <li class="breadcrumb-item active">{{ product.name }}</li>
    </ol>
</nav>

<div class="row">
    <!-- Product Image -->
    <div class="col-md-6 mb-4">
        <img src="{{ product.image }}" class="img-fluid rounded shadow" alt="{{ product.name }}">
    </div>

    <!-- Product Info -->
    <div class="col-md-6">
        <span class="badge bg-secondary mb-2">{{ product.category }}</span>
        <h2>{{ product.name }}</h2>
        
        <div class="mb-3">
            <span class="text-warning">
                {% for i in range(5) %}
                    {% if i < product.rating %}
                        <i class="fas fa-star"></i>
                    {% else %}
                        <i class="far fa-star"></i>
                    {% endif %}
                {% endfor %}
            </span>
            <span class="ms-2">{{ product.rating }}/5</span>
            <span class="text-muted ms-3">Đã bán {{ product.sold }}</span>
        </div>

        <div class="bg-light p-3 rounded mb-3">
            <h3 class="price mb-0">{{ "{:,.0f}".format(product.price) }}đ</h3>
        </div>

        <h5>Mô tả sản phẩm:</h5>
        <p class="text-muted">{{ product.description }}</p>

        <div class="mb-3">
            <label class="form-label">Số lượng:</label>
            <input type="number" class="form-control" value="1" min="1" style="width: 100px;">
        </div>

        <div class="d-grid gap-2">
            <button class="btn btn-primary btn-lg" onclick="alert('Đã thêm vào giỏ hàng!')">
                <i class="fas fa-shopping-cart"></i> Thêm Vào Giỏ Hàng
            </button>
            <button class="btn btn-outline-primary btn-lg" onclick="alert('Mua ngay!')">
                <i class="fas fa-bolt"></i> Mua Ngay
            </button>
        </div>

        <!-- AI Analytics Box -->
        <div class="mt-4 p-3 rounded" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <h6><i class="fas fa-chart-line"></i> AI Analytics</h6>
            <small>Thời gian bạn đang xem: <strong id="view-time">0</strong>s</small>
        </div>
    </div>
</div>

<!-- Related Products -->
<div class="mt-5">
    <h4 class="mb-3"><i class="fas fa-tags"></i> Sản Phẩm Liên Quan</h4>
    <div class="row">
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="card product-card">
                <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=300" class="card-img-top" alt="Product" style="height: 150px; object-fit: cover;">
                <div class="card-body">
                    <h6>Sản phẩm tương tự</h6>
                    <span class="price">299,000đ</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Real-time view timer
    setInterval(() => {
        let seconds = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById('view-time').innerText = seconds;
    }, 1000);
</script>
{% endblock %}
